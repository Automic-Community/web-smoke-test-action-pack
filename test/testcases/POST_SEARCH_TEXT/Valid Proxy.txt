*** Settings ***
Documentation     NOTE:
...               add note here
Suite Setup       Suite Setup
Force Tags        POST_SEARCH_TEXT    win    unix
Test Template     Post Search Text Template
Resource          ../../resources/keywords.txt

*** Test Cases ***    URL                                               KEY VALUE                        EXPECTED TITLE             REGEX    USERNAME         PASSWORD      TIMEOUT    IGNORE    PROXY HOST      PROXY PORT    PROXY USER    PROXY PASS
Valid Proxy with text, user and password,
                      https://${_HOST}/smoke_web/basicauth/post.aspx    name=world                       Hello world                NO       Administrator    S3rv3r@Aut    10000      YES       172.16.36.18    3128          squid-user    ventum2011@

Valid Proxy with text, no user and pass
                      https://${_HOST}/smoke_web/post.aspx              name=world                       Hello world                NO       ${EMPTY}         ${EMPTY}      10000      YES       172.16.36.18    3128          squid-user    ventum2011@

Valid Proxy with text, no user and pass, no certificate
                      http://${_HOST}/smoke_web/post.aspx               name=world                       Hello world                NO       ${EMPTY}         ${EMPTY}      10000      NO        172.16.36.18    3128          squid-user    ventum2011@

Valid Proxy with text, user and pass, no certificate
                      http://${_HOST}/smoke_web/basicauth/post.aspx     name=world                       Hello world                NO       Administrator    S3rv3r@Aut    10000      NO        172.16.36.18    3128          squid-user    ventum2011@

Valid Proxy with user and password
                      http://${_HOST}/smoke_web/basicauth/post.aspx     name=world, email=ntn@automic    Hel{1,2}o world            YES      Administrator    S3rv3r@Aut    10000      YES       172.16.36.18    3128          squid-user    ventum2011@

Valid Proxy with no user and pass
                      https://${_HOST}/smoke_web/post.aspx              name=world, email=ntn@automic    hel{2,3}o |world           YES      ${EMPTY}         ${EMPTY}      10000      YES       172.16.36.18    3128          squid-user    ventum2011@

Valid Proxy with no user and pass, no certificate
                      http://${_HOST}/smoke_web/post.aspx               name=world, email=ntn@automic    aur?t.mic                  YES      ${EMPTY}         ${EMPTY}      10000      NO        172.16.36.18    3128          squid-user    ventum2011@

Valid Proxy with user and pass, no certificate
                      http://${_HOST}/smoke_web/basicauth/post.aspx     name=world, email=ntn@automic    @automi[cv]$               YES      Administrator    S3rv3r@Aut    10000      NO        172.16.36.18    3128          squid-user    ventum2011@

Regex, but input text
                      http://${_HOST}/smoke_web/basicauth/post.aspx     name=world, email=ntn@automic    ntn@automic                YES      Administrator    S3rv3r@Aut    10000      NO        172.16.36.18    3128          squid-user    ventum2011@

Strim space character at the beggining and end of string
                      http://${_HOST}/smoke_web/basicauth/post.aspx     name=world, email=ntn@automic    My email is ntn@automic    YES      Administrator    S3rv3r@Aut    10000      NO        172.16.36.18    3128          squid-user    ventum2011@

Text does not match, sensitive case
                      https://${_HOST}/smoke_web/post.aspx              name=world                       hello world                NO       ${EMPTY}         ${EMPTY}      10000      YES       172.16.36.18    3128          squid-user    ventum2011@

*** Keywords ***
Post Search Text Template
    [Arguments]    ${url}    ${keyValue}    ${expectedText}    ${regex}    ${username}    ${password}
    ...    ${timeout}    ${ignore}    ${proxyHost}    ${proxyPort}    ${proxyUser}    ${proxyPass}
    Init Action    ${ACTION_POST_SEARCH_TEXT}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_URL}    ${url}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_KEY_VALUE}    ${keyValue}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_EXPECTED_TEXT}    ${expectedText}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_TREAT_AS_REGEX}    ${regex}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_USERNAME}    ${username}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_PASSWORD}    ${password}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_OPEN_TIMEOUT}    ${timeout}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_IGNORE_SERVER_CERT}    ${ignore}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_PROXY_HOSTNAME}    ${proxyHost}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_PROXY_HOST_PORT}    ${proxyPort}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_PROXY_USERNAME}    ${proxyUser}
    Action Set    ${PRT_POST_SEARCH_TEXT_ST_PROXY_PASSWORD}    ${proxyPass}
    Action Execute
    Action Report Should Be Found
    Action Return Code Should Be    0

*** Settings ***
Documentation     NOTE:
...               add note here
Suite Setup       Suite Setup
Force Tags        GET_SEARCH_TEXT    win    unix
Test Template     Get Search Text Template
Resource          ../../resources/keywords.txt

*** Test Cases ***    URL                                      EXPECTED                           REGEX       USERNAME         PASSWORD         TIMEOUT       IGNORE    PROXY HOST       PROXY PORT      PROXY USER    PROXY PASS     RETURN CODE
Text not match        https://${_HOST}/smoke_web/              helloworld                         NO          ${EMPTY}         ${EMPTY}         10000         YES       172.16.36.18     3128            squid-user    ventum2011@    7

Invalid username      http://${_HOST}/smoke_web/basicauth/     world                              NO          Admin            S3rv3r@Aut       10000         NO        172.16.36.18     3128            squid-user    ventum2011@    3

Invalid password      http://${_HOST}/smoke_web/basicauth/     hello                              NO          Administrator    S3rv3r           10000         NO        172.16.36.18     3128            squid-user    ventum2011@    3

No Ignore certificate for HTTPS
                      https://${_HOST}/smoke_web/basicauth/    [^t]ello                           YES         Administrator    S3rv3r@Aut       10000         NO        172.16.36.18     3128            squid-user    ventum2011@    6

Timeout               http://10.255.255.1                      [hc]*w.rld                         YES         Administrator    S3rv3r@Aut       10000         NO        172.16.36.18     3128            squid-user    ventum2011@    1
                      #Webserver not available
                      #                                        http://172.16.106.57/smoke_web/    worl[da]    YES              Administrator    S3rv3r@Aut    10000     NO               172.16.36.18    3128          squid-user     ventum2011@    2

Proxy Server not available,
                      http://${_HOST}/smoke_web/               worl[da]                           YES         Administrator    S3rv3r@Aut       10000         NO        172.16.36.108    3128            squid-user    ventum2011@    4

Proxy Server not available, wrong port
                      http://${_HOST}/smoke_web/               worl[da]                           YES         Administrator    S3rv3r@Aut       10000         NO        172.16.36.18     3028            squid-user    ventum2011@    4

Wrong proxy username
                      http://${_HOST}/smoke_web/               worl[da]                           YES         Administrator    S3rv3r@Aut       10000         NO        172.16.36.18     3128            wrong         ventum2011@    5

Wrong proxy Password
                      http://${_HOST}/smoke_web/               worl[da]                           YES         Administrator    S3rv3r@Aut       10000         NO        172.16.36.18     3128            squid-user    ${EMPTY}       5

Text not match        https://${_HOST}/smoke_web/              helloworld                         NO          ${EMPTY}         ${EMPTY}         10000         YES       172.16.36.18     3128            squid-user    ventum2011@    7

No Regex, but input regular expression
                      https://${_HOST}/smoke_web/              hel{2,3}o |world                   NO          ${EMPTY}         ${EMPTY}         10000         YES       172.16.36.18     3128            squid-user    ventum2011@    7

Text in Regex not match
                      http://${_HOST}/smoke_web/               he?llo{4,5}rl[yv]                  YES         ${EMPTY}         ${EMPTY}         10000         NO        172.16.36.18     3128            squid-user    ventum2011@    7

Text does not match, different space character in the midle of string
                      https://${_HOST}/smoke_web/basicauth/    hello \ world                      NO          Administrator    S3rv3r@Aut       10000         YES       172.16.36.18     3128            squid-user    ventum2011@    7

*** Keywords ***
Get Search Text Template
    [Arguments]    ${url}    ${expected}    ${regex}    ${username}    ${password}    ${timeout}
    ...    ${ignore}    ${proxyHost}    ${$proxyPort}    ${proxyUser}    ${proxyPass}    ${returnCode}
    Init Action    ${ACTION_GET_SEARCH_TEXT}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_URL}    ${url}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_EXPECTED_TEXT}    ${expected}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_TREAT_AS_REGEX}    ${regex}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_USERNAME}    ${username}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_PASSWORD}    ${password}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_OPEN_TIMEOUT}    ${timeout}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_IGNORE_SERVER_CERT}    ${ignore}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_PROXY_HOSTNAME}    ${proxyHost}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_PROXY_HOST_PORT}    ${$proxyPort}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_PROXY_USERNAME}    ${proxyUser}
    Action Set    ${PRT_GET_SEARCH_TEXT_ST_PROXY_PASSWORD}    ${proxyPass}
    Action Execute
    Action Report Should Be Found
    Action Return Code Should Be    ${returnCode}

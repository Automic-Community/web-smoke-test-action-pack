*** Settings ***
Documentation     NOTE:
...               add note here
Suite Setup       Suite Setup
Force Tags        GET_SEARCH_ELEMENT    win    unix
Test Template     Get Search Element Template
Resource          ../../resources/keywords.txt

*** Test Cases ***    URL                                                                            EXPECTED                                            USERNAME                                   PASSWORD      TIMEOUT     IGNORE    PROXY HOST       PROXY PORT      PROXY USER    PROXY PASS     RETURN CODE
Invalid user with proxy
                      https://${_HOST}/smoke_web/basicauth/                                          //body[contains(text(),'hello world!')]             Adminis                                    S3rv3r@Aut    10000       YES       ${PROXY_HOST}     ${PROXY_PORT}            ${PROXY_USER}    ${PROXY_PW}    3

Invalid password with proxy
                      https://${_HOST}/smoke_web/basicauth/                                          //body[contains(text(),'hello world!')]             Administrator                              S3rv3r        10000       YES       ${PROXY_HOST}     ${PROXY_PORT}            ${PROXY_USER}    ${PROXY_PW}    3
                      #Comment this case because proxy return code unstablely in case of time out
                      #Timeout                                                                       http://10.255.255.1                                 //body[contains(text(),'hello world!')]    ${EMPTY}      ${EMPTY}    0         YES              ${PROXY_HOST}    ${PROXY_PORT}          ${PROXY_USER}     ${PROXY_PW}    1
                      #WebServer is not available
                      #                                                                              https://172.16.106.57/smoke_web/                    //body[text()='hello world!']              ${EMPTY}      ${EMPTY}    10000     YES              ${PROXY_HOST}    ${PROXY_PORT}          ${PROXY_USER}     ${PROXY_PW}    2

Not Ignore certificate for HTTPS sites, with proxy
                      https://${_HOST}/smoke_web/                                                    //body[contains(text(),'hello world!')]             ${EMPTY}                                   ${EMPTY}      10000       NO        ${PROXY_HOST}     ${PROXY_PORT}            ${PROXY_USER}    ${PROXY_PW}    6

Proxy server is not available
                      http://${_HOST}/smoke_web/                                                     //body[contains(text(),'hello world!')]             Administrator                              S3rv3r@Aut    10000       NO        172.16.96.108    ${PROXY_PORT}            ${PROXY_USER}    ${PROXY_PW}    4

Proxy server is not available, wrong port
                      http://${_HOST}/smoke_web/                                                     //body[contains(text(),'hello world!')]             Administrator                              S3rv3r@Aut    10000       NO        172.16.96.108    3108            ${PROXY_USER}    ${PROXY_PW}    4

Wrong proxy username
                      http://${_HOST}/smoke_web/basicauth/                                           //body[contains(text(),'hello world!')]             Administrator                              S3rv3r@Aut    10000       NO        ${PROXY_HOST}     ${PROXY_PORT}            squid         ${PROXY_PW}    5

Wrong proxy password
                      http://${_HOST}/smoke_web/basicauth/                                           //body[contains(text(),'hello world!')]             Administrator                              S3rv3r@Aut    10000       NO        ${PROXY_HOST}     ${PROXY_PORT}            ${PROXY_USER}    ventum         5
                      #Return code > 7                                                               http://172.16.36.7/smoke_web/error.aspx?code=400    //body[text()='hello world!']              ${EMPTY}      ${EMPTY}    10000     NO               ${PROXY_HOST}    ${PROXY_PORT}          ${PROXY_USER}     ${PROXY_PW}    ?

Expected element does not appear on the page
                      http://${_HOST}/smoke_web/basicauth/                                           //body[text()='not found']                          Administrator                              S3rv3r@Aut    10000       NO        ${PROXY_HOST}     ${PROXY_PORT}            ${PROXY_USER}    ${PROXY_PW}    7

*** Keywords ***
Get Search Element Template
    [Arguments]    ${url}    ${expected}    ${username}    ${password}    ${timeout}    ${ignore}
    ...    ${proxyHost}    ${proxyPort}    ${proxyUser}    ${proxyPass}    ${returnCode}
    Init Action    ${ACTION_GET_SEARCH_ELEMENT}
    Action Set    ${PRT_GET_SEARCH_ELEMENT_ST_URL}    ${url}
    Action Set    ${PRT_GET_SEARCH_ELEMENT_ST_EXPECTED_ELEMENT}    ${expected}
    Action Set    ${PRT_GET_SEARCH_ELEMENT_ST_USERNAME}    ${username}
    Action Set    ${PRT_GET_SEARCH_ELEMENT_ST_PASSWORD}    ${password}
    Action Set    ${PRT_GET_SEARCH_ELEMENT_ST_OPEN_TIMEOUT}    ${timeout}
    Action Set    ${PRT_GET_SEARCH_ELEMENT_ST_IGNORE_SERVER_CERT}    ${ignore}
    Action Set    ${PRT_GET_SEARCH_ELEMENT_ST_PROXY_HOSTNAME}    ${proxyHost}
    Action Set    ${PRT_GET_SEARCH_ELEMENT_ST_PROXY_HOST_PORT}    ${proxyPort}
    Action Set    ${PRT_GET_SEARCH_ELEMENT_ST_PROXY_USERNAME}    ${proxyUser}
    Action Set    ${PRT_GET_SEARCH_ELEMENT_ST_PROXY_PASSWORD}    ${proxyPass}
    Action Execute
    Action Report Should Be Found
    Action Return Code Should Be    ${returnCode}
    #Action Return Status Should Be    ${returnStatus}
    #Action Return Variable Should Be    &UC4RB_OUT_VARA#    ${outVara}
